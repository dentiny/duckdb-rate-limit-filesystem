# name: test/sql/rate_limit_config_errors.test
# description: test rate limit configuration error cases
# group: [sql]

require rate_limit_filesystem

# Test error: non-existent filesystem for quota
statement error
SELECT rate_limit_fs_quota('NonExistentFS', 'read', 1000, 'blocking');
----
not found

# Test error: non-existent filesystem for burst
statement error
SELECT rate_limit_fs_burst('NonExistentFS', 'read', 1000);
----
not found

# Test error: invalid operation for quota
statement error
SELECT rate_limit_fs_quota('RateLimitFsFakeFileSystem', 'invalid_op', 1000, 'blocking');
----
Invalid operation

# Test error: invalid operation for burst
statement error
SELECT rate_limit_fs_burst('RateLimitFsFakeFileSystem', 'unknown', 1000);
----
Invalid operation

# Test error: invalid mode
statement error
SELECT rate_limit_fs_quota('RateLimitFsFakeFileSystem', 'read', 1000, 'invalid_mode');
----
Invalid rate limit mode

# Test error: negative quota
statement error
SELECT rate_limit_fs_quota('RateLimitFsFakeFileSystem', 'read', -100, 'blocking');
----
Quota value must be non-negative

# Test error: negative burst
statement error
SELECT rate_limit_fs_burst('RateLimitFsFakeFileSystem', 'read', -100);
----
Burst value must be non-negative

# Test error: burst on non-byte operations (only READ/WRITE support burst)
statement error
SELECT rate_limit_fs_burst('RateLimitFsFakeFileSystem', 'stat', 100);
----
Burst limit can only be set for READ or WRITE operations

statement error
SELECT rate_limit_fs_burst('RateLimitFsFakeFileSystem', 'list', 100);
----
Burst limit can only be set for READ or WRITE operations

statement error
SELECT rate_limit_fs_burst('RateLimitFsFakeFileSystem', 'delete', 100);
----
Burst limit can only be set for READ or WRITE operations

